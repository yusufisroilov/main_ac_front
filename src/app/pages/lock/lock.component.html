<div class="wrapper wrapper-full-page">
  <div class="page-header lock-page header-filter"
    style="background-image: url('./assets/img/hmphoto.jpeg'); background-size: cover; background-position: top center;">

    <div class="container">
      <div class="row">
        <div class="col-md-10 ml-auto mr-auto">

          <!-- Main Search Card - Simple Design -->
          <div class="card">
            <div class="card-body" style="padding: 20px;">
              <div style="text-align: center; margin-bottom: 24px;">
                <img src="./assets/img/faces/logo.png" alt="Logo"
                  style="width: 80px; height: 80px; object-fit: contain; margin-bottom: 12px;">
                <h4 style="margin: 0 0 6px 0; font-size: 20px; font-weight: 600; color: #333;">Yukni Kuzatish</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">Trek raqamini kiriting</p>
              </div>

              <div style="display: flex; gap: 8px; max-width: 500px; margin: 0 auto;">
                <input type="text" class="form-control" [(ngModel)]="trackingNum"
                  (keyup.enter)="checkParcel()" placeholder="Trek raqamini kiriting..."
                  [disabled]="isLoading"
                  style="padding: 10px 16px; font-size: 14px; border-radius: 8px;">
                <button class="btn btn-primary" (click)="checkParcel()"
                  [disabled]="!trackingNum || isLoading"
                  style="padding: 10px 24px; font-size: 14px; border-radius: 8px; white-space: nowrap;">
                  <span *ngIf="!isLoading">Qidirish</span>
                  <span *ngIf="isLoading">Kutish...</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Loading State -->
          <div *ngIf="isLoading" class="card" style="margin-top: 20px;">
            <div class="card-body text-center" style="padding: 40px 20px;">
              <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
              </div>
              <p class="mt-3 text-muted">Ma'lumotlar qidirilmoqda...</p>
            </div>
          </div>

          <!-- Results Card - Simple Design -->
          <div *ngIf="showResults && !isLoading" class="card" style="margin-top: 20px;">
            <div class="card-body" style="padding: 20px;">

              <!-- Success Message -->
              <div style="text-align: center; margin-bottom: 24px;">
                <i class="material-icons" style="font-size: 48px; color: #4caf50;">check_circle</i>
                <h4 style="margin: 8px 0 0 0; font-size: 18px; font-weight: 600; color: #333;">Yukingiz Topildi</h4>
              </div>

              <!-- Main Info - Simple List -->
              <div style="max-width: 600px; margin: 0 auto 24px auto;">
                <div class="info-row">
                  <span class="info-label">Trek Raqami:</span>
                  <span class="info-value text-primary">{{trackingNumber}}</span>
                </div>
                <div class="info-row" *ngIf="orderNameRu">
                  <span class="info-label">Mahsulot:</span>
                  <span class="info-value">{{orderNameRu}}</span>
                </div>
                <div class="info-row" *ngIf="orderStatusDescriptionUZ">
                  <span class="info-label">Status:</span>
                  <span class="info-value">
                    <span class="badge badge-success">{{orderStatusDescriptionUZ}}</span>
                  </span>
                </div>
                <div class="info-row" *ngIf="boxNumber">
                  <span class="info-label">Partiya:</span>
                  <span class="info-value">
                    <span class="badge badge-info">CU{{boxNumber | slice:2:5}}</span>
                  </span>
                </div>
              </div>

              <!-- Timeline - Simple List -->
              <div *ngIf="hasTrackingDates" style="max-width: 600px; margin: 0 auto 24px auto;">
                <h5 style="font-size: 15px; font-weight: 600; color: #333; margin-bottom: 16px; padding-bottom: 8px; border-bottom: 2px solid #e0e0e0;">
                  Vaqt Bo'yicha Statuslar
                </h5>

                <div class="timeline-simple">
                  <div class="timeline-item" *ngIf="in_foreign_warehouse_date">
                    <i class="material-icons">check_circle</i>
                    <div>
                      <div class="timeline-text">Xitoy omborida</div>
                      <div class="timeline-date">{{in_foreign_warehouse_date | slice:0:10}}</div>
                    </div>
                  </div>

                  <div class="timeline-item" *ngIf="in_foreign_airport_date">
                    <i class="material-icons">check_circle</i>
                    <div>
                      <div class="timeline-text">Xitoy Aeroportida</div>
                      <div class="timeline-date">{{in_foreign_airport_date | slice:0:10}}</div>
                    </div>
                  </div>

                  <div class="timeline-item" *ngIf="in_uzb_airport_date">
                    <i class="material-icons">check_circle</i>
                    <div>
                      <div class="timeline-text">O'zbekiston Aeroportida</div>
                      <div class="timeline-date">{{in_uzb_airport_date | slice:0:10}}</div>
                    </div>
                  </div>

                  <div class="timeline-item" *ngIf="in_uzb_warehouse_date">
                    <i class="material-icons">check_circle</i>
                    <div>
                      <div class="timeline-text">O'zbekiston Skladida</div>
                      <div class="timeline-date">{{in_uzb_warehouse_date | slice:0:10}}</div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Reset Button -->
              <div style="text-align: center;">
                <button class="btn btn-primary" (click)="resetSearch()"
                  style="padding: 10px 24px; font-size: 14px; border-radius: 8px;">
                  Qaytadan Qidirish
                </button>
              </div>
            </div>
          </div>

          <!-- Error Card -->
          <div *ngIf="showError && !isLoading" class="card" style="margin-top: 20px;">
            <div class="card-body text-center" style="padding: 60px 20px;">
              <i class="material-icons" style="font-size: 80px; color: #ff9800;">error_outline</i>
              <h4 class="mt-3" style="font-size: 20px; font-weight: 600;">Topilmadi</h4>
              <p class="text-muted">{{errorMessage || 'Trek raqami bo\'yicha ma\'lumot topilmadi'}}</p>
              <button class="btn btn-warning btn-sm mt-3" (click)="resetSearch()"
                style="padding: 8px 20px; font-size: 13px;">
                <i class="material-icons" style="font-size: 16px; vertical-align: middle; margin-right: 4px;">refresh</i>
                Qaytadan Urinish
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>